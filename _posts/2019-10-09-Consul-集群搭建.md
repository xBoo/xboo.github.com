#### node1:
docker run -d --name=consul-node1 --restart=always \
             -e 'CONSUL_LOCAL_CONFIG={"skip_leave_on_interrupt": true}' \
             -p 8300:8300 \
             -p 8301:8301 \
             -p 8301:8301/udp \
             -p 8302:8302/udp \
             -p 8302:8302 \
             -p 8400:8400 \
             -p 8500:8500 \
             -p 8600:8600 \
             -h node1 \
             -v /opt/consul-node1/config:/consul/config \
             consul agent -server  -bootstrap-expect=3 -node=node1 \
             -data-dir=/tmp/data-dir -client 0.0.0.0 -ui

#### node2:
docker run -d --name=consul-node2 --restart=always \
            -e 'CONSUL_LOCAL_CONFIG={"skip_leave_on_interrupt": true}' \
            -p 8310:8300 \
            -p 8311:8301 \
            -p 8311:8301/udp \
            -p 8312:8302/udp \
            -p 8312:8302 \
            -p 8410:8400 \
            -p 8510:8500 \
            -p 8610:8600 \
            -h node2 \
            consul agent -server \
            -join=192.168.10.101 -node-id=$(uuidgen | awk '{print tolower($0)}') \
            -node=node2 \
            -data-dir=/tmp/data-dir -client 0.0.0.0 -ui

#### node3:
docker run -d --name=consul-node3 --restart=always \
            -e 'CONSUL_LOCAL_CONFIG={"skip_leave_on_interrupt": true}' \
            -p 8320:8300 \
            -p 8321:8301 \
            -p 8321:8301/udp \
            -p 8322:8302/udp \
            -p 8322:8302 \
            -p 8420:8400 \
            -p 8520:8500 \
            -p 8620:8600 \
            -h node3 \
            consul agent -server \
            -join=192.168.10.101 -node-id=$(uuidgen | awk '{print tolower($0)}') \
            -node=node3 \
            -data-dir=/tmp/data-dir -client 0.0.0.0 -ui

#### client node

docker run -d --name=consul-node4  --restart=always \
            -e 'CONSUL_LOCAL_CONFIG={"leave_on_terminate": true}' \
            -p 8340:8300 \
            -p 8341:8301 \
            -p 8341:8301/udp \
            -p 8342:8302/udp \
            -p 8342:8302 \
            -p 8440:8400 \
            -p 8540:8500 \
            -p 8640:8600 \
            -h node4 \
            -v /opt/consul/config:/consul/config \
            consul agent  -retry-join=192.168.10.101  \
            -node-id=$(uuidgen | awk '{print tolower($0)}') \
            -node=node4 -client 0.0.0.0 -ui